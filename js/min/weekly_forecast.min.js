import{settings,weatherIcons,cachedLang,unitsTypes,calcTemp}from"./read_storage.min.js";function weeklyForecast(data){const weather=data.weather.daily,cardIcons=document.querySelectorAll(".wf-card-weekday-weather-icon"),cardWeekdays=document.querySelectorAll(".wf-card-weekday"),cardDates=document.querySelectorAll(".wf-card-weekday-date"),cardTemps=document.querySelectorAll(".wf-card-weekday-temp"),aria=cachedLang.aria;for(let[i,e]of weather.entries()){let weekday=new Date(1e3*e.dt),w=cachedLang.weather[`desc${e.weather[0].id}`];cardIcons[i].classList.forEach(el=>el.startsWith("bi-")?cardIcons[i].classList.replace(el,weatherIcons.get(e.weather[0].id)):null),cardIcons[i].title=w,cardIcons[i].ariaLabel=aria["weather-week-label"].replace("%weather",w).replace("%weekday",cachedLang.weekdays[weekday.getDay()]).replace("%temp",calcTemp(e.temp.day)),cardWeekdays[i].innerHTML=cachedLang.weekdays[weekday.getDay()],cardDates[i].innerHTML=weekday.toLocaleDateString("pl-pl").padStart(10,"0"),cardTemps[i].innerHTML=calcTemp(e.temp.day)}document.querySelector("#wf-weekday-card-0").checked=!0,setCardData(0,data)}function setCardData(value,data){const weather=data.weather.daily[value];let weekday=new Date(1e3*weather.dt);const icon=weatherIcons.get(weather.weather[0].id);document.querySelector(".wf-weekday-data").innerHTML=cachedLang.weekdays[weekday.getDay()],document.querySelector(".wf-date-data").innerHTML=weekday.toLocaleDateString("pl-pl").padStart(10,"0"),document.querySelector(".wf-sunrise-data").innerHTML=new Date(1e3*weather.sunrise).toLocaleTimeString("pl-PL",{timeZone:data.weather.timezone,hour:"2-digit",minute:"2-digit",hourCycle:settings.clockMode}),document.querySelector(".wf-sunset-data").innerHTML=new Date(1e3*weather.sunset).toLocaleTimeString("pl-PL",{timeZone:data.weather.timezone,hour:"2-digit",minute:"2-digit",hourCycle:settings.clockMode}),document.querySelector(".wf-day-temp-data").innerHTML=`${cachedLang.generic["weather-temp-abbr"]} ${calcTemp(weather.temp.day)}`,document.querySelector(".wf-day-fl-temp-data").innerHTML=`${cachedLang.generic["weather-temp-fl-abbr"]} ${calcTemp(weather.feels_like.day)}`,document.querySelector(".wf-night-temp-data").innerHTML=`${cachedLang.generic["weather-temp-abbr"]} ${calcTemp(weather.temp.night)}`,document.querySelector(".wf-night-fl-temp-data").innerHTML=`${cachedLang.generic["weather-temp-fl-abbr"]} ${calcTemp(weather.feels_like.night)}`,document.querySelector(".wf-humid-data").innerHTML=`${Math.round(weather.humidity)} %`,document.querySelector(".wf-press-data").innerHTML=`${Math.round(weather.pressure)} hPa`,document.querySelector(".wf-wind-speed-data").innerHTML=`${Math.round(weather.wind_speed)} ${unitsTypes.get(settings.units).wind_speed}`,document.querySelector(".wf-pop-data").innerHTML=`${Math.round(100*weather.pop)} %`,document.querySelector(".wf-weather-desc-data").innerHTML=cachedLang.weather[`desc${weather.weather[0].id}`],document.querySelectorAll(".wf-weather-icon-data").forEach(e=>{e.classList.forEach(el=>{el.startsWith("bi-")&&e.classList.replace(el,icon)})}),weather.snow?(document.querySelectorAll(".wf-snow-hideable").forEach(e=>{e.classList.remove("box-hidden"),e.ariaHidden=!1}),document.querySelectorAll(".wf-snow-data").forEach(e=>{e.innerHTML=`${weather.snow} mm`})):document.querySelectorAll(".wf-snow-hideable").forEach(e=>{e.classList.add("box-hidden"),e.ariaHidden=!0}),weather.rain?(document.querySelectorAll(".wf-rain-hideable").forEach(e=>{e.classList.remove("box-hidden"),e.ariaHidden=!1}),document.querySelectorAll(".wf-rain-data").forEach(e=>{e.innerHTML=`${weather.rain} mm`})):document.querySelectorAll(".wf-rain-hideable").forEach(e=>{e.classList.add("box-hidden"),e.ariaHidden=!0})}export{weeklyForecast,setCardData};